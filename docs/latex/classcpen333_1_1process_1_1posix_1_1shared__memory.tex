\hypertarget{classcpen333_1_1process_1_1posix_1_1shared__memory}{}\section{cpen333\+:\+:process\+:\+:posix\+:\+:shared\+\_\+memory Class Reference}
\label{classcpen333_1_1process_1_1posix_1_1shared__memory}\index{cpen333\+::process\+::posix\+::shared\+\_\+memory@{cpen333\+::process\+::posix\+::shared\+\_\+memory}}


Inter-\/process shared memory implementation.  




{\ttfamily \#include $<$shared\+\_\+memory.\+h$>$}

Inheritance diagram for cpen333\+:\+:process\+:\+:posix\+:\+:shared\+\_\+memory\+:\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[height=2.488889cm]{classcpen333_1_1process_1_1posix_1_1shared__memory}
\end{center}
\end{figure}
\subsection*{Public Types}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classcpen333_1_1process_1_1posix_1_1shared__memory_a4bec0d0093c8bcfa3283a5da8ef1fc78}\label{classcpen333_1_1process_1_1posix_1_1shared__memory_a4bec0d0093c8bcfa3283a5da8ef1fc78}} 
using \hyperlink{classcpen333_1_1process_1_1posix_1_1shared__memory_a4bec0d0093c8bcfa3283a5da8ef1fc78}{native\+\_\+handle\+\_\+type} = int
\begin{DoxyCompactList}\small\item\em Alias to native handle for shared memory. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classcpen333_1_1process_1_1posix_1_1shared__memory_a8a8f0918f8e132e0369c6e9ca9aa6bb6}{shared\+\_\+memory} (const std\+::string \&\hyperlink{classcpen333_1_1process_1_1impl_1_1named__resource__base_a53986a0a1dd26a3602b842c45613b79d}{name}, size\+\_\+t size, bool readonly=false)
\begin{DoxyCompactList}\small\item\em Constructs or connects to a block of shared memory. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classcpen333_1_1process_1_1posix_1_1shared__memory_a618389d509320111d7aef051fbd32c07}\label{classcpen333_1_1process_1_1posix_1_1shared__memory_a618389d509320111d7aef051fbd32c07}} 
\hyperlink{classcpen333_1_1process_1_1posix_1_1shared__memory_a618389d509320111d7aef051fbd32c07}{$\sim$shared\+\_\+memory} ()
\begin{DoxyCompactList}\small\item\em Destructor, unmaps this instance of the shared memory block (but does not unmap memory from other users) \end{DoxyCompactList}\item 
void $\ast$ \hyperlink{classcpen333_1_1process_1_1posix_1_1shared__memory_ae97ceec75dc83d43a995daac4769504d}{get} (size\+\_\+t offset=0)
\begin{DoxyCompactList}\small\item\em Pointer to memory at a particular offset from the block. \end{DoxyCompactList}\item 
uint8\+\_\+t \& \hyperlink{classcpen333_1_1process_1_1posix_1_1shared__memory_a832b82cb6ab398e814418b516dba2dd9}{operator\mbox{[}$\,$\mbox{]}} (size\+\_\+t offset)
\begin{DoxyCompactList}\small\item\em Byte access, by reference. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T $>$ }\\T $\ast$ \hyperlink{classcpen333_1_1process_1_1posix_1_1shared__memory_a09582d7b2863aebbbd74d2f32d0b1af8}{get} (size\+\_\+t offset)
\begin{DoxyCompactList}\small\item\em Retrieves a pointer to an object of specified type starting at a particular offset. \end{DoxyCompactList}\item 
{\footnotesize template$<$typename T $>$ }\\T $\ast$ \hyperlink{classcpen333_1_1process_1_1posix_1_1shared__memory_a705beedc2e0b3bde2e044fe742f641ea}{get} ()
\begin{DoxyCompactList}\small\item\em Retrieves a pointer to the underlying memory, cast to a specified type. \end{DoxyCompactList}\item 
bool \hyperlink{classcpen333_1_1process_1_1posix_1_1shared__memory_a3b6d67a41cfaca3712d87958682d8bbe}{unlink} ()
\begin{DoxyCompactList}\small\item\em Detaches the name from the named resource. \end{DoxyCompactList}\item 
\hyperlink{classcpen333_1_1process_1_1posix_1_1shared__memory_a4bec0d0093c8bcfa3283a5da8ef1fc78}{native\+\_\+handle\+\_\+type} \hyperlink{classcpen333_1_1process_1_1posix_1_1shared__memory_ac0dd258666565953b8c6bdbde7aa871f}{native\+\_\+handle} ()
\begin{DoxyCompactList}\small\item\em Native handle to underlying shared memory block. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static bool \hyperlink{classcpen333_1_1process_1_1posix_1_1shared__memory_a68a9ecfafed3c939bc9c38edee71d584}{unlink} (const std\+::string \&\hyperlink{classcpen333_1_1process_1_1impl_1_1named__resource__base_a53986a0a1dd26a3602b842c45613b79d}{name})
\begin{DoxyCompactList}\small\item\em Unlinks the name without needing to create a resource. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Additional Inherited Members}


\subsection{Detailed Description}
Inter-\/process shared memory implementation. 

Creates and shares a block of memory between threads/processes, accessible using a unique name. The block of memory is mapped to D\+I\+F\+F\+E\+R\+E\+NT address spaces on each process. This is essentially a memory-\/mapped file.

This shared memory has K\+E\+R\+N\+EL P\+E\+R\+S\+I\+S\+T\+E\+N\+CE, meaning if not \hyperlink{classcpen333_1_1process_1_1posix_1_1shared__memory_a3b6d67a41cfaca3712d87958682d8bbe}{unlink()}-\/ed, will continue to exist in its current state until the system is shut down (persisting beyond the life of the initiating program) 

\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classcpen333_1_1process_1_1posix_1_1shared__memory_a8a8f0918f8e132e0369c6e9ca9aa6bb6}\label{classcpen333_1_1process_1_1posix_1_1shared__memory_a8a8f0918f8e132e0369c6e9ca9aa6bb6}} 
\index{cpen333\+::process\+::posix\+::shared\+\_\+memory@{cpen333\+::process\+::posix\+::shared\+\_\+memory}!shared\+\_\+memory@{shared\+\_\+memory}}
\index{shared\+\_\+memory@{shared\+\_\+memory}!cpen333\+::process\+::posix\+::shared\+\_\+memory@{cpen333\+::process\+::posix\+::shared\+\_\+memory}}
\subsubsection{\texorpdfstring{shared\+\_\+memory()}{shared\_memory()}}
{\footnotesize\ttfamily cpen333\+::process\+::posix\+::shared\+\_\+memory\+::shared\+\_\+memory (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{name,  }\item[{size\+\_\+t}]{size,  }\item[{bool}]{readonly = {\ttfamily false} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Constructs or connects to a block of shared memory. 


\begin{DoxyParams}{Parameters}
{\em name} & identifier for creating or connecting to an existing inter-\/process shared memory block \\
\hline
{\em size} & if creating, the size of the memory block. This size should be consistent between users \\
\hline
{\em readonly} & whether or not to map the memory as read-\/only \\
\hline
\end{DoxyParams}


\subsection{Member Function Documentation}
\mbox{\Hypertarget{classcpen333_1_1process_1_1posix_1_1shared__memory_ae97ceec75dc83d43a995daac4769504d}\label{classcpen333_1_1process_1_1posix_1_1shared__memory_ae97ceec75dc83d43a995daac4769504d}} 
\index{cpen333\+::process\+::posix\+::shared\+\_\+memory@{cpen333\+::process\+::posix\+::shared\+\_\+memory}!get@{get}}
\index{get@{get}!cpen333\+::process\+::posix\+::shared\+\_\+memory@{cpen333\+::process\+::posix\+::shared\+\_\+memory}}
\subsubsection{\texorpdfstring{get()}{get()}\hspace{0.1cm}{\footnotesize\ttfamily [1/3]}}
{\footnotesize\ttfamily void$\ast$ cpen333\+::process\+::posix\+::shared\+\_\+memory\+::get (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{offset = {\ttfamily 0} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Pointer to memory at a particular offset from the block. 


\begin{DoxyParams}{Parameters}
{\em offset} & memory offset (in bytes) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
pointer to memory offset 
\end{DoxyReturn}
\mbox{\Hypertarget{classcpen333_1_1process_1_1posix_1_1shared__memory_a09582d7b2863aebbbd74d2f32d0b1af8}\label{classcpen333_1_1process_1_1posix_1_1shared__memory_a09582d7b2863aebbbd74d2f32d0b1af8}} 
\index{cpen333\+::process\+::posix\+::shared\+\_\+memory@{cpen333\+::process\+::posix\+::shared\+\_\+memory}!get@{get}}
\index{get@{get}!cpen333\+::process\+::posix\+::shared\+\_\+memory@{cpen333\+::process\+::posix\+::shared\+\_\+memory}}
\subsubsection{\texorpdfstring{get()}{get()}\hspace{0.1cm}{\footnotesize\ttfamily [2/3]}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
T$\ast$ cpen333\+::process\+::posix\+::shared\+\_\+memory\+::get (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{offset }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Retrieves a pointer to an object of specified type starting at a particular offset. 


\begin{DoxyTemplParams}{Template Parameters}
{\em T} & type of pointer to return \\
\hline
\end{DoxyTemplParams}

\begin{DoxyParams}{Parameters}
{\em offset} & memory offset (in bytes) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
pointer to object 
\end{DoxyReturn}
\mbox{\Hypertarget{classcpen333_1_1process_1_1posix_1_1shared__memory_a705beedc2e0b3bde2e044fe742f641ea}\label{classcpen333_1_1process_1_1posix_1_1shared__memory_a705beedc2e0b3bde2e044fe742f641ea}} 
\index{cpen333\+::process\+::posix\+::shared\+\_\+memory@{cpen333\+::process\+::posix\+::shared\+\_\+memory}!get@{get}}
\index{get@{get}!cpen333\+::process\+::posix\+::shared\+\_\+memory@{cpen333\+::process\+::posix\+::shared\+\_\+memory}}
\subsubsection{\texorpdfstring{get()}{get()}\hspace{0.1cm}{\footnotesize\ttfamily [3/3]}}
{\footnotesize\ttfamily template$<$typename T $>$ \\
T$\ast$ cpen333\+::process\+::posix\+::shared\+\_\+memory\+::get (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Retrieves a pointer to the underlying memory, cast to a specified type. 


\begin{DoxyTemplParams}{Template Parameters}
{\em T} & type of pointer to return \\
\hline
\end{DoxyTemplParams}
\begin{DoxyReturn}{Returns}
pointer to object 
\end{DoxyReturn}
\mbox{\Hypertarget{classcpen333_1_1process_1_1posix_1_1shared__memory_ac0dd258666565953b8c6bdbde7aa871f}\label{classcpen333_1_1process_1_1posix_1_1shared__memory_ac0dd258666565953b8c6bdbde7aa871f}} 
\index{cpen333\+::process\+::posix\+::shared\+\_\+memory@{cpen333\+::process\+::posix\+::shared\+\_\+memory}!native\+\_\+handle@{native\+\_\+handle}}
\index{native\+\_\+handle@{native\+\_\+handle}!cpen333\+::process\+::posix\+::shared\+\_\+memory@{cpen333\+::process\+::posix\+::shared\+\_\+memory}}
\subsubsection{\texorpdfstring{native\+\_\+handle()}{native\_handle()}}
{\footnotesize\ttfamily \hyperlink{classcpen333_1_1process_1_1posix_1_1shared__memory_a4bec0d0093c8bcfa3283a5da8ef1fc78}{native\+\_\+handle\+\_\+type} cpen333\+::process\+::posix\+::shared\+\_\+memory\+::native\+\_\+handle (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Native handle to underlying shared memory block. 

On P\+O\+S\+IX systems, this is a P\+O\+S\+IX shm id

\begin{DoxyReturn}{Returns}
native handle to shared memory block 
\end{DoxyReturn}
\mbox{\Hypertarget{classcpen333_1_1process_1_1posix_1_1shared__memory_a832b82cb6ab398e814418b516dba2dd9}\label{classcpen333_1_1process_1_1posix_1_1shared__memory_a832b82cb6ab398e814418b516dba2dd9}} 
\index{cpen333\+::process\+::posix\+::shared\+\_\+memory@{cpen333\+::process\+::posix\+::shared\+\_\+memory}!operator\mbox{[}\mbox{]}@{operator[]}}
\index{operator\mbox{[}\mbox{]}@{operator[]}!cpen333\+::process\+::posix\+::shared\+\_\+memory@{cpen333\+::process\+::posix\+::shared\+\_\+memory}}
\subsubsection{\texorpdfstring{operator[]()}{operator[]()}}
{\footnotesize\ttfamily uint8\+\_\+t\& cpen333\+::process\+::posix\+::shared\+\_\+memory\+::operator\mbox{[}$\,$\mbox{]} (\begin{DoxyParamCaption}\item[{size\+\_\+t}]{offset }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Byte access, by reference. 


\begin{DoxyParams}{Parameters}
{\em offset} & memory offset (in bytes) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
byte at particular offset 
\end{DoxyReturn}
\mbox{\Hypertarget{classcpen333_1_1process_1_1posix_1_1shared__memory_a3b6d67a41cfaca3712d87958682d8bbe}\label{classcpen333_1_1process_1_1posix_1_1shared__memory_a3b6d67a41cfaca3712d87958682d8bbe}} 
\index{cpen333\+::process\+::posix\+::shared\+\_\+memory@{cpen333\+::process\+::posix\+::shared\+\_\+memory}!unlink@{unlink}}
\index{unlink@{unlink}!cpen333\+::process\+::posix\+::shared\+\_\+memory@{cpen333\+::process\+::posix\+::shared\+\_\+memory}}
\subsubsection{\texorpdfstring{unlink()}{unlink()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily bool cpen333\+::process\+::posix\+::shared\+\_\+memory\+::unlink (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



Detaches the name from the named resource. 

On P\+O\+S\+IX systems, named resources will persist beyond the lifetime of any process that uses them as long as the name has not been unlinked (or until the system is rebooted). Calling {\ttfamily unlink} will detach the name, allowing the resource to be freed once all current users have exited.

\begin{DoxyReturn}{Returns}
{\ttfamily true} if unlink is successful, {\ttfamily false} if unlinking is not supported or if an error has occurred. 
\end{DoxyReturn}


Implements \hyperlink{classcpen333_1_1process_1_1impl_1_1named__resource__base_ae4033f82dfd068b917a9bca57d3a0c45}{cpen333\+::process\+::impl\+::named\+\_\+resource\+\_\+base}.



Reimplemented in \hyperlink{classcpen333_1_1process_1_1shared__object_aa5b43829da5bd2376927e6285745211c}{cpen333\+::process\+::shared\+\_\+object$<$ T $>$}, \hyperlink{classcpen333_1_1process_1_1shared__object_aa5b43829da5bd2376927e6285745211c}{cpen333\+::process\+::shared\+\_\+object$<$ pipe\+\_\+info $>$}, and \hyperlink{classcpen333_1_1process_1_1shared__object_aa5b43829da5bd2376927e6285745211c}{cpen333\+::process\+::shared\+\_\+object$<$ shared\+\_\+data $>$}.

\mbox{\Hypertarget{classcpen333_1_1process_1_1posix_1_1shared__memory_a68a9ecfafed3c939bc9c38edee71d584}\label{classcpen333_1_1process_1_1posix_1_1shared__memory_a68a9ecfafed3c939bc9c38edee71d584}} 
\index{cpen333\+::process\+::posix\+::shared\+\_\+memory@{cpen333\+::process\+::posix\+::shared\+\_\+memory}!unlink@{unlink}}
\index{unlink@{unlink}!cpen333\+::process\+::posix\+::shared\+\_\+memory@{cpen333\+::process\+::posix\+::shared\+\_\+memory}}
\subsubsection{\texorpdfstring{unlink()}{unlink()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily static bool cpen333\+::process\+::posix\+::shared\+\_\+memory\+::unlink (\begin{DoxyParamCaption}\item[{const std\+::string \&}]{name }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Unlinks the name without needing to create a resource. 

Implementers should also provide a static method for unlinking. The purpose is mainly for clean-\/up of existing resources.


\begin{DoxyParams}{Parameters}
{\em name} & desired resource name \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
{\ttfamily true} if unlink successful, {\ttfamily false} if not successful or not supported 
\end{DoxyReturn}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
D\+:/school/teaching/\+C\+P\+E\+N333/workspace/library/include/cpen333/process/impl/posix/\hyperlink{impl_2posix_2shared__memory_8h}{shared\+\_\+memory.\+h}\end{DoxyCompactItemize}
